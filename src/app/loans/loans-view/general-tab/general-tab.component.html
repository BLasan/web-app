<div class="tab-container mat-typography">

  <div class="loan-card">

    <div class="content">
 
      <div class="loan-tables" fxLayout="row" fxLayoutGap="6%">

        <div *ngIf="loanDetails.summary" fxFlex="60%">
  
          <h4 class="table-headers"> Loan Summary </h4>
      
          <table mat-table [dataSource]="dataSource">
            <ng-container matColumnDef="Empty">
              <th mat-header-cell *matHeaderCellDef>  </th>
              <td mat-cell *matCellDef="let ele"> {{ ele.property }} </td>
            </ng-container>
      
            <ng-container matColumnDef="Original">
              <th mat-header-cell *matHeaderCellDef> Original </th>
              <td mat-cell *matCellDef="let ele"> {{ ele.original | number }} </td>
            </ng-container>
      
            <ng-container matColumnDef="Paid">
              <th mat-header-cell *matHeaderCellDef> Paid </th>
              <td mat-cell *matCellDef="let ele"> {{ ele.paid | number }} </td>
            </ng-container>
      
            <ng-container matColumnDef="Waived">
              <th mat-header-cell *matHeaderCellDef> Waived </th>
              <td mat-cell *matCellDef="let ele"> {{ ele.waived | number }} </td>
            </ng-container>
      
            <ng-container matColumnDef="Written Off">
              <th mat-header-cell *matHeaderCellDef> Written Off </th>
              <td mat-cell *matCellDef="let ele"> {{ ele.writtenOff | number }} </td>
            </ng-container>
      
            <ng-container matColumnDef="Outstanding">
              <th mat-header-cell *matHeaderCellDef> Outstanding </th>
              <td mat-cell *matCellDef="let ele"> {{ ele.outstanding | number }} </td>
            </ng-container>
      
            <ng-container matColumnDef="Over Due">
              <th mat-header-cell *matHeaderCellDef> Over Due </th>
              <td mat-cell *matCellDef="let ele"> {{ ele.overdue | number }} </td>
            </ng-container>
      
            <tr mat-header-row *matHeaderRowDef="loanSummaryColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: loanSummaryColumns;"></tr>
          </table>
      
        </div>

        <div *ngIf="!loanDetails.summary" fxFlex="60%">
          <h4 class="table-headers"> Loan Purpose </h4>
          <table>
            <tbody>
              <tr>
                <td> Loan Purpose </td>
                <td> {{ loanDetails.loanPurchaseName ? loanDetails.loanPurchaseName: 'Not Available' }} </td>
              </tr>
              <tr>
                <td> Proposed Amount </td>
                <td>{{loanDetails.proposedPrincipal | number}}</td>
              </tr>
              <tr *ngIf="showApprovedAmountBasedOnStatus()">
                <td> Approved Amount </td>
                <td>{{ loanDetails.approvedPrincipal | number }}</td>
              </tr>
              <tr *ngIf="showDisbursedAmountBasedOnStatus()">
                <td> Disburse Amount </td>
                <td> {{ loanDetails.principal | number }} </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div fxLayout="column" fxLayoutGap="27%" fxFlex="40%">

          <div fxFlex="40%" *ngIf="loanDetails.summary">
            <h4 class="table-headers"> Loan Details </h4>
            <table>
              <tbody>
                <tr>
                  <td> Disbursement Date </td>
                  <td> {{ loanDetails.timeline.actualDisbursementDate ? (loanDetails.timeline.actualDisbursementDate | date): 'Not Available' }}</td>
                </tr>
                <tr>
                  <td> Loan Purpose </td>
                  <td> {{ loanDetails.loanPurchaseName ? loanDetails.loanPurchaseName: 'Not Available' }} </td>
                </tr>
                <tr>
                  <td> Loan Officer </td>
                  <td>{{loanDetails.loanOfficerName ? loanDetails.loanOfficerName : 'Unassigned'}}</td>
                </tr>
                <tr>
                  <td> Currency </td>
                  <td>{{loanDetails.currency.name }}</td>
                </tr>
                <tr>
                  <td> External Id </td>
                  <td>{{loanDetails.externalId ? loanDetails.externalId : 'Not Available'}}</td>
                </tr>
                <tr>
                  <td> Proposed Amount </td>
                  <td> {{ loanDetails.proposedPrincipal }} </td>
                </tr>
                <tr>
                  <td> Approved Amount </td>
                  <td> {{ loanDetails.approvedPrincipal }} </td>
                </tr>
                <tr>
                  <td> Disburse Amount </td>
                  <td> {{ loanDetails.principal }} </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div fxFlex="40%" *ngIf="!loanDetails.summary">
            <h4 class="table-headers"> Loan Details </h4>
            <table>
              <tbody>
                <tr>
                  <td> Disbursement Date </td>
                  <td> {{ loanDetails.timeline.actualDisbursementDate ? (loanDetails.timeline.actualDisbursementDate | date): 'Not Available' }}</td>
                </tr>
                <tr>
                  <td> Loan Officer </td>
                  <td>{{loanDetails.loanOfficerName ? loanDetails.loanOfficerName : 'Unassigned'}}</td>
                </tr>
                <tr>
                  <td> Currency </td>
                  <td>{{loanDetails.currency.name }}</td>
                </tr>
                <tr>
                  <td> External Id </td>
                  <td>{{loanDetails.externalId ? loanDetails.externalId : 'Not Available'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
  
          <div fxFlex="40%" *ngIf="loanDetails.summary">
            <h4 class="table-headers"> Performance History </h4>
            <table>
              <tbody>
                <tr>
                  <td> # of Repayments </td>
                  <td > {{loanDetails?.numberOfRepayments}} </td>
                </tr>
                <tr>
                  <td> Maturity Date </td>
                  <td> {{loanDetails?.timeline.expectedMaturityDate | date}} </td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
  
      </div>
  
    </div>

  </div>

</div>
